{"ast":null,"code":"import * as AuthActions from './authActions';\nexport const setupSocket = (token, userId) => {\n  return dispatch => {\n    const socket = new WebSocket('ws://localhost:8080');\n\n    socket.onopen = () => {\n      if (token) {\n        socket.send(JSON.stringify({\n          type: 'CONNECT_WITH_TOKEN',\n          data: {\n            token: token,\n            userId: userId\n          }\n        }));\n        dispatch({\n          type: 'SETUP_SOCKET',\n          payload: socket\n        });\n      } else {\n        dispatch({\n          type: 'SETUP_SOCKET',\n          payload: socket\n        });\n      }\n    };\n\n    socket.onmessage = message => {\n      console.log('Message', message);\n      let data = JSON.parse(message.data);\n\n      switch (data.type) {\n        case 'LOGGEDIN':\n          dispatch(AuthActions.loggedIn(data));\n          break;\n\n        case 'GOT_USERS':\n          dispatch({\n            type: 'GOT_USERS',\n            payload: data.data.users\n          });\n          break;\n\n        case 'ADD_THREAD':\n          dispatch({\n            type: 'ADD_THREAD',\n            payload: data.data\n          });\n          break;\n\n        case 'INITIAL_THREADS':\n          dispatch({\n            type: 'INITIAL_THREADS',\n            payload: data.data\n          });\n          break;\n\n        default: //do nothing\n\n      }\n    };\n  };\n};","map":{"version":3,"sources":["C:/Users/NOYON/projects/Chat-Application/chat/src/store/actions/chatActions.js"],"names":["AuthActions","setupSocket","token","userId","dispatch","socket","WebSocket","onopen","send","JSON","stringify","type","data","payload","onmessage","message","console","log","parse","loggedIn","users"],"mappings":"AAAA,OAAO,KAAKA,WAAZ,MAA6B,eAA7B;AAEA,OAAO,MAAMC,WAAW,GAAG,CAACC,KAAD,EAAQC,MAAR,KAAmB;AAC1C,SAAOC,QAAQ,IAAI;AACf,UAAMC,MAAM,GAAG,IAAIC,SAAJ,CAAc,qBAAd,CAAf;;AACAD,IAAAA,MAAM,CAACE,MAAP,GAAgB,MAAM;AAClB,UAAGL,KAAH,EAAS;AACLG,QAAAA,MAAM,CAACG,IAAP,CAAYC,IAAI,CAACC,SAAL,CAAe;AACvBC,UAAAA,IAAI,EAAE,oBADiB;AAEvBC,UAAAA,IAAI,EAAE;AACFV,YAAAA,KAAK,EAAEA,KADL;AAEFC,YAAAA,MAAM,EAAEA;AAFN;AAFiB,SAAf,CAAZ;AAOAC,QAAAA,QAAQ,CAAC;AACLO,UAAAA,IAAI,EAAE,cADD;AAELE,UAAAA,OAAO,EAAER;AAFJ,SAAD,CAAR;AAIH,OAZD,MAaI;AACAD,QAAAA,QAAQ,CAAC;AACLO,UAAAA,IAAI,EAAE,cADD;AAELE,UAAAA,OAAO,EAAER;AAFJ,SAAD,CAAR;AAIH;AACJ,KApBD;;AAsBAA,IAAAA,MAAM,CAACS,SAAP,GAAoBC,OAAD,IAAa;AAC5BC,MAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ,EAAuBF,OAAvB;AACA,UAAIH,IAAI,GAAGH,IAAI,CAACS,KAAL,CAAWH,OAAO,CAACH,IAAnB,CAAX;;AACA,cAAOA,IAAI,CAACD,IAAZ;AACI,aAAK,UAAL;AACIP,UAAAA,QAAQ,CAACJ,WAAW,CAACmB,QAAZ,CAAqBP,IAArB,CAAD,CAAR;AACA;;AACJ,aAAK,WAAL;AACIR,UAAAA,QAAQ,CAAC;AACLO,YAAAA,IAAI,EAAE,WADD;AAELE,YAAAA,OAAO,EAAED,IAAI,CAACA,IAAL,CAAUQ;AAFd,WAAD,CAAR;AAIA;;AACJ,aAAK,YAAL;AACIhB,UAAAA,QAAQ,CAAC;AACLO,YAAAA,IAAI,EAAE,YADD;AAELE,YAAAA,OAAO,EAAED,IAAI,CAACA;AAFT,WAAD,CAAR;AAIA;;AACJ,aAAK,iBAAL;AACIR,UAAAA,QAAQ,CAAC;AACLO,YAAAA,IAAI,EAAE,iBADD;AAELE,YAAAA,OAAO,EAAED,IAAI,CAACA;AAFT,WAAD,CAAR;AAIA;;AACJ,gBAtBJ,CAuBQ;;AAvBR;AAyBH,KA5BD;AA8BH,GAtDD;AAuDH,CAxDM","sourcesContent":["import * as AuthActions from './authActions';\r\n\r\nexport const setupSocket = (token, userId) => {\r\n    return dispatch => {\r\n        const socket = new WebSocket('ws://localhost:8080');\r\n        socket.onopen = () => {\r\n            if(token){\r\n                socket.send(JSON.stringify({\r\n                    type: 'CONNECT_WITH_TOKEN',\r\n                    data: {\r\n                        token: token,\r\n                        userId: userId\r\n                    } \r\n                }))\r\n                dispatch({\r\n                    type: 'SETUP_SOCKET',\r\n                    payload: socket\r\n                });\r\n            }\r\n            else{ \r\n                dispatch({\r\n                    type: 'SETUP_SOCKET',\r\n                    payload: socket\r\n                });\r\n            }\r\n        }\r\n\r\n        socket.onmessage = (message) => {\r\n            console.log('Message', message);\r\n            let data = JSON.parse(message.data);\r\n            switch(data.type){\r\n                case 'LOGGEDIN':\r\n                    dispatch(AuthActions.loggedIn(data));\r\n                    break;\r\n                case 'GOT_USERS':\r\n                    dispatch({\r\n                        type: 'GOT_USERS',\r\n                        payload: data.data.users\r\n                    })\r\n                    break;\r\n                case 'ADD_THREAD':\r\n                    dispatch({\r\n                        type: 'ADD_THREAD',\r\n                        payload: data.data\r\n                    });\r\n                    break;\r\n                case 'INITIAL_THREADS':\r\n                    dispatch({\r\n                        type: 'INITIAL_THREADS',\r\n                        payload: data.data\r\n                    });\r\n                    break;\r\n                default: \r\n                    //do nothing\r\n            }\r\n        }\r\n\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}